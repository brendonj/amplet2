package amplet2.measured;

message Control {
        enum Type {
            SERVER = 1;
            SCHEDULE = 2;
        }

        optional Type type = 1;

        optional Server server = 2;
        optional Schedule schedule = 3;
}

message Server {
        optional uint32 test_type = 1;
        optional string argv = 2;
}

message Schedule {
        enum Period {
            SCHEDULE_PERIOD_HOURLY = 1;
            SCHEDULE_PERIOD_DAILY = 2;
            SCHEDULE_PERIOD_WEEKLY = 3;
        }

        optional uint32 test = 1;
        optional string target = 2;
        optional int64 start = 3 [default = 0];
        optional int64 end = 4 [default = -1];
        optional Period period = 5 [default = SCHEDULE_PERIOD_DAILY];
        optional int64 frequency = 6 [default = -1];
        optional string argv = 7;
        /* TODO make test permanent or not */
        /* TODO how to remove permanent tests */
        optional bool repeat = 8 [default = false];
}
